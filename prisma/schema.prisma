// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id           String @id @default(uuid())
  name         String
  neonNickName String @unique
  email        String @unique
  usersPosts   Post[] @relation("UsersPosts")
  savedPosts   Post[] @relation("UsersSavedPosts")
  likedPosts   Post[] @relation("LikedUserPosts")
}

model Post {
  id        String    @id @default(uuid())
  createdAt DateTime
  updetedAt DateTime
  popular   Float
  author    User      @relation("UsersPosts", fields: [authorId], references: [id])
  authorId  String
  likedBy   User?     @relation("LikedUserPosts", fields: [likedById], references: [id])
  likedById String?
  savedBy   User?     @relation("UsersSavedPosts", fields: [savedById], references: [id])
  savedById String
  content   Content[]
}

model Content {
  id    String @id @default(uuid())
  posts Post[]
}
